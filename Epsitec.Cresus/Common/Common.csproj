<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <AssemblyDescription>Common Library for the Epsitec Framework</AssemblyDescription>
    <RootNamespace>Epsitec.Common</RootNamespace>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>
  <ItemGroup>
    <Compile Update="Widgets\Platform\Window.cs" />
    <Compile Remove="Drawing\FontHelper.cs" />
    <Compile Remove="Support\AppDomainStarter.cs" />
    <Compile Remove="Support\Data\IDisablableChangedSource.cs" />
    <Compile Remove="Text\Styles\ApplyMode.cs" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="SharpZipLib" Version="1.4.2" />
    <Reference Include="AntiGrain.NET">
      <HintPath>..\External\agg-2.4.x\AntiGrain.NET.dll</HintPath>
    </Reference>
  </ItemGroup>
  <ItemGroup>
    <Content Include="..\External\agg-2.4.x\AntiGrain.Win32.dll">
      <Link>AntiGrain.Win32.dll</Link>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="..\External\Clipboard.Win32.dll">
      <Link>Clipboard.Win32.dll</Link>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="Drawing\IconLib\Resources\EmptyDll.dll">
      <Link>EmptyDll.dll</Link>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="Resources\**\*.resource">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="Resources\**\*.info">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
  </ItemGroup>
  <ItemGroup>
    <EmbeddedResource Update="Drawing\IconLib\Resource.resx">
      <SubType>Designer</SubType>
    </EmbeddedResource>
    <EmbeddedResource Include="..\External\images\bitmap\binocular-64x48.png">
      <Link>Dialogs\Images\binocular-64x48.png</Link>
    </EmbeddedResource>
    <EmbeddedResource Include="..\External\images\bitmap\box-64x48.png">
      <Link>Dialogs\Images\box-64x48.png</Link>
    </EmbeddedResource>
    <EmbeddedResource Include="Support\Resources\ProjectFileTemplate.xml" />
    <EmbeddedResource Include="Widgets\Adorners\Resources\*.png" />
    <EmbeddedResource Include="Dialogs\Images\*.icon" />
    <EmbeddedResource Include="Widgets\Images\*.icon" />
    <EmbeddedResource Include="Drawing\Resources\LineBreak.compressed" />
    <EmbeddedResource Include="Text\Resources\LineBreak.compressed" />
  </ItemGroup>
  <ItemGroup>
    <None Include="Drawing\FontHelper.cs" />
    <None Include="IO\Serialization.cs" />
    <None Include="Support\AppDomainStarter.cs" />
  </ItemGroup>

  <Target Name="CresusCore_Common_AddInternalsVisibleToAttribute" BeforeTargets="GetAssemblyAttributes">
    <ItemGroup>
      <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
        <_Parameter1>Common.Tests</_Parameter1>
      </AssemblyAttribute>
      <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
        <_Parameter1>Common.Tests.Vs</_Parameter1>
      </AssemblyAttribute>
      <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
        <_Parameter1>Cresus.DataLayer.Tests.Vs</_Parameter1>
      </AssemblyAttribute>
      <AssemblyAttribute Include="System.Runtime.CompilerServices.InternalsVisibleTo">
        <_Parameter1>Cresus.DataLayer</_Parameter1>
      </AssemblyAttribute>
    </ItemGroup>
  </Target>
</Project>